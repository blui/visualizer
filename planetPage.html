<html>
	<head>
		<title>Code Galaxy</title>
		<style>canvas { width: 100%; height: 100% }</style>
	</head>
	<body bgcolor="#000000">
		<script src="https://rawgithub.com/mrdoob/three.js/master/build/three.js"></script>
		<script>
				var camera, scene, renderer; 
				
				//Arrays for the planet and sun objects
				var suns = new Array(), planets = new Array(), stars = new Array();				
				//Arrays for the star orbiting animations
				var starsradii = new Array(), starscentres  = new Array();
				//Arrays for the planet orbiting animations
				var planetradii = new Array(), planetcentres = new Array(), planetorbitspeeds = new Array();
				//Arrays for the planet rotation animations
				var planetrotationspeeds = new Array();
				
				//Manually declare variables of dataSets from parser
				//For class01 -> UIGroup
				var class01 = ['UIGroup', 151, 'private', 'abstract'];
				var planetsClass01 = [
					['getDescriptor', 1, 'method'],
					['getDisplayName', 1, 'method'],
					['getDisplayDetails', 4, 'method'],
					['setDisplayDetails', 4, 'method'],
					['getSourceIndex', 1, 'method'],
					['getParentGroup', 1, 'method'],
					['isGroupCollapsed', 1, 'method'],
					['countOnlineChildContacts', 1, 'method'],
					['countChildContacts', 1, 'method'],
					['getId', 1, 'method'],
					['getRightButtonMenu', 1, 'method'],
					['getPreferredHeight', 4, 'method'],
					['setPreferredHeight', 4, 'method'],
					['getCustomActionButtons', 4, 'method'],
					['preferredGroupHeight', 1, 'variable'],
					['displayDetails', 1, 'variable']
				];
				
				//For class02 -> Container
				var class02 = ['Container', 245, 'public', ''];
				var planetsClass02 = [
					['Container', 4, 'method'],
					['getID', 4, 'method'],
					['equals', 20, 'method'],
					['CONTAINER_ID', 1, 'variable'],
					['START', 1, 'variable'],
					['END', 1, 'variable'],
					['TOP', 1, 'variable'],
					['BOTTOM', 1, 'variable'],
					['LEFT', 1, 'variable'],
					['RIGHT', 1, 'variable'],
					['containerName', 1, 'variable']
				];
				
				//For class03 -> UIContact
				var class03 = ['UIContact', 140, 'public', 'abstract'];
				var planetsClass03 = [
					['getDescriptor', 1, 'method'],
					['getDisplayName', 1, 'method'],
					['getDisplayDetails', 1, 'method'],
					['getSourceIndex', 1, 'method'],
					['getToolTip', 1, 'method'],
					['getRightButtonMenu', 1, 'method'],
					['getParentGroup', 1, 'method'],
					['setParentGroup', 1, 'method'],
					['getSearchStrings', 1, 'method'],
					['getDefaultContactDetail', 2, 'method'],
					['getContactDetailsForOpterationSet', 2, 'method'],
					['getContactDetails', 1, 'method'],
					['getContactCustomActionButtons', 1, 'method'],
					['getPreferredHeight', 4, 'method']
				];			

				//For class04 -> LazyConfigurationForm
				var class04 = ['LazyConfigurationForm', 223, 'public', ''];
				var planetsClass04 = [
					['getResources', 8, 'method', 'private'],
					['index', 1, 'variable', 'private'],
					['getForm', 23, 'method', 'public'],
					['getFormClassLoader', 4, 'method', 'protected'],
					['getFormClassName', 4, 'method', 'public'],
					['titleID', 1, 'variable', 'protected'],
					['getIcon', 4, 'method', 'public'],
					['getIconID', 4, 'method', 'protected'],
					['formClassName', 1, 'variable', 'private'],
					['getIndex', 4, 'method', 'public'],
					['isAdvanced', 1, 'variable', 'public'],
					['getTitle', 4, 'method', 'public'],
					['resources', 1, 'variable', 'private'],
					['getTitleID', 4, 'method', 'protected'],
					['isAdvanced', 4, 'method', 'public'],
					['formClassLoader', 1, 'variable', 'private'],
					['iconID', 1, 'variable', 'private']

				];				
				
				//Initialize everything
				function init()
				{
					scene = new THREE.Scene();
					camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 0.1, 1000 );
					camera.position.set(0,0,90);
					camera.up = new THREE.Vector3(0,0,1);
					camera.lookAt(new THREE.Vector3(0.3,2,2));
					renderer = new THREE.WebGLRenderer();
					renderer.setSize( window.innerWidth, window.innerHeight );
					document.body.appendChild( renderer.domElement );
					var light = new THREE.PointLight(0xffffff, 2);
					light.position.set(0,0,80);
					scene.add(light)
				}
				
				//Draw a sun at a specific location with a specific size and colour
				function drawSun(sunyposition, sunsize, suncolour)
				{
					var sungeometry = new THREE.SphereGeometry(sunsize,30,30);
					var sunmaterial = new THREE.MeshPhongMaterial({color:suncolour, shininess: 12, specular: 0xdedeb2});
					var sun = new THREE.Mesh(sungeometry, sunmaterial);
					sun.geometry.dynamic = true;
					sun.position.y = -sunyposition;
					suns.push(sun);
					scene.add(sun);		
				}
				
				//Draw a planet for a given sun with a specific position, size, colour, orbit speed and rotation speed
				function drawPlanet(planetxposition, sunyposition, planetsize, planetcolour, orbitspeed, rotationspeed)
				{
					var planetgeometry = new THREE.SphereGeometry(planetsize,10,10);
					var planetmaterial = new THREE.MeshPhongMaterial();
					planetmaterial.color.copy(new THREE.Color(planetcolour));
					var planet = new THREE.Mesh(planetgeometry, planetmaterial);
					planet.geometry.dynamic = true;
					planet.position.x = planetxposition;
					planet.position.y = sunyposition;
					planets.push(planet);
					planetradii.push(planetxposition);
					planetcentres.push(0);
					planetorbitspeeds.push(orbitspeed);
					planetrotationspeeds.push(rotationspeed);
					scene.add(planet);
				}
				
				//Draw a star for a given sun with a specific position
				function drawStar(starxposition, sunyposition)
				{
					var stargeometry = new THREE.OctahedronGeometry(1.5, 0);
					var starmaterial = new THREE.MeshPhongMaterial();
					starmaterial.color.copy(new THREE.Color(0xFFFFFF));
					var star = new THREE.Mesh(stargeometry, starmaterial);
					star.geometry.dynamic = true;
					star.position.x = starxposition;
					star.position.y = sunyposition;
					stars.push(star);
					starsradii.push(starxposition);
					starscentres.push(0);
					scene.add(star);
				}
				
				//Function to draw the rings for the orbits
				function drawOrbitRing(orbitradius)
				{
					var radius = orbitradius;
					var resolution = 100;
					var size = 360 / resolution;
					var linegeometry = new THREE.Geometry();
					var linematerial = new THREE.LineBasicMaterial();
					linematerial.color.copy(new THREE.Color(0xD3D3D3));		
						for(var i = 0; i <= resolution; i++) 
						{
						var segment = (i*size) * (Math.PI/180);
						linegeometry.vertices.push(new THREE.Vertex(new THREE.Vector3(Math.cos(segment)*radius, 0, Math.sin(segment)*radius)));         
						}		
					var ring = new THREE.Line(linegeometry, linematerial);
					scene.add(ring);
				}
				
				//Function to draw many rings based on the spacing between the planets
				function drawManyRings(spacing)
				{
					for (var i = 0; i < planets.length; i++)
					{
						drawOrbitRing((spacing*i) + spacing);
					}
				}
				
				//Function to determine the size of the sun based on the number of lines in the class
				function determineSunSize(numberoflines)
				{
					var size = (numberoflines/20);
					if (size > 15)
					{
						return size = 15;
					}
					else if (size < 1)
					{
						return size = 1;
					}
					else
					{
						return size;
					}
				}
				
				//Function to determine the colour of the sun based on whether it is a public, protected or private class
				function  determineSunColour(classtype)
				{
					if (classtype == "public")
					{	
						var colour = 0xFFFFFF;
						return colour;
					}
					else if (classtype == "protected")
					{
						var colour = 0xFFFF00;
						return colour;
					}
					else
					{
						var colour = 0xFF4500;
						return colour;
					}
				}
				
				//Function to determine the colour of the planet based on whether it is a method or a variable
				function  determinePlanetColour(type)
				{
					if (type == "method")
					{	
						var colour = 0x006400;
						return colour;
					}
					else
					{
						var colour = 0x800080;
						return colour;
					}
				}
				
				//Function to determine the orbit speed based on whether the method is public, protected or private
				function determinePlanetOrbitSpeed(type)
				{
					if (type == 'public')
					{
						var speed = 0.05;
						return speed;
					}
					else if (type == 'protected')
					{
						var speed = 0.025;
						return speed;
					}
					else if (type == 'private')
					{
						var speed = 0.0375;
						return speed;
					}
				}
					
				//Keyboard listener to move the camera around
				function keyboardListener()
				{
					window.addEventListener('keypress', function (e) {
						if (e.keyCode === 97) 
						{
							camera.position.x -= 0.5;
						}
						else if (e.keyCode === 100)
						{
							camera.position.x += 0.5;
						}
						else if (e.keyCode === 119)
						{
							camera.position.y += 0.5;
						}
						else if (e.keyCode === 120)
						{
							camera.position.y -= 0.5;
						}
						else if (e.keyCode === 115)
						{
							camera.position.z += 0.5;
						}
						else if (e.keyCode === 83)
						{
							camera.position.z -= 0.5;
						}
						else if (e.keyCode === 98)
						{
							camera.rotation.x -= 0.01;
						}
						else if (e.keyCode === 116)
						{
							camera.rotation.x += 0.01;
						}
						else if (e.keyCode === 104)
						{
							camera.rotation.y += 0.01;
						}
						else if (e.keyCode === 102)
						{
							camera.rotation.y -= 0.01;
						}
						else if (e.keyCode === 103)
						{
							camera.rotation.z += 0.01;
						}
						else if (e.keyCode === 71)
						{
							camera.rotation.z -= 0.01;
						}
				}, false);
				}
				
				//Function to make the planets spin on their axis
				function rotateAnimation()
				{
					for (var i = 0; i< planets.length; i++)
					{
						planets[i].rotation.y += planetrotationspeeds[i];
					}
				}
				
				//Function to make the planets orbit the sun
				function planetOrbitAnimation()
				{
					for (var i = 0; i< planets.length; i++)
					{
						planets[i].position.x = planetradii[i]*Math.sin(planetcentres[i]);
						planets[i].position.z = planetradii[i]*Math.cos(planetcentres[i]);
						planetcentres[i] += planetorbitspeeds[i];
					}
				}
				
				//Function to make the stars orbit the sun
				function starOrbitAnimation()
				{
					for (var i = 0; i< stars.length; i++)
					{
						stars[i].position.x = starsradii[i]*Math.sin(starscentres[i]);
						stars[i].position.y = starsradii[i]*Math.cos(starscentres[i]);
						starscentres[i] += 2;
					}
				}
				
				//Call the animate functions
				function animate()
				{
					requestAnimationFrame(animate);
					rotateAnimation();
					planetOrbitAnimation();
					starOrbitAnimation();
					render();
				}
						
				//Render everything
				function render() 
				{													
					renderer.render(scene, camera);
				}	
				
				init();
				keyboardListener();
				animate();
								
				//Draw a star
				drawStar(16.5, 0);
				
				//Draw some suns
				drawSun(0, determineSunSize(class01[1]), determineSunColour(class01[2]));				
				
				//Draw some planets
				//drawPlanet(34, 0, planetsClass01[2][1], 0x2F4F4F , 0.05, 0.06);
				//drawPlanet(34, 0, 4, 0xD2691E, 0.01, 0.09);
				
				for (var i = 0; i < planetsClass04.length; i++) 
				{
					drawPlanet(15+(i*15), 0, planetsClass04[i][1], determinePlanetColour(planetsClass04[i][2]), determinePlanetOrbitSpeed(planetsClass04[i][3]), 0.06);
				}
				drawManyRings(15);
								
		</script>
	</body>
</html>