<html>
	<head>
		<title>Code Galaxy</title>
		<style>canvas { width: 100%; height: 100% }</style>
	</head>
	<body bgcolor="#000000">
		<script src="https://rawgithub.com/mrdoob/three.js/master/build/three.js"></script>
		<script>
		
		
				var camera, scene, renderer; 
				
				//Planet and sun objects
				var suns = new Array();
				
				var planetradii = new Array();
				var planetcentres = new Array();
				var planetorbitspeeds = new Array();
				var planetrotationspeeds = new Array();
				
				//Manually declare variables of dataSets from parser
				//For class01 -> UIGroup
				var class01 = ['UIGroup', 151, 'public', 'abstract'];
				var planetsClass01 = [
					['getDescriptor', 1, 'method'],
					['getDisplayName', 1, 'method'],
					['getDisplayDetails', 4, 'method'],
					['setDisplayDetails', 4, 'method'],
					['getSourceIndex', 1, 'method'],
					['getParentGroup', 1, 'method'],
					['isGroupCollapsed', 1, 'method'],
					['countOnlineChildContacts', 1, 'method'],
					['countChildContacts', 1, 'method'],
					['getId', 1, 'method'],
					['getRightButtonMenu', 1, 'method'],
					['getPreferredHeight', 4, 'method'],
					['setPreferredHeight', 4, 'method'],
					['getCustomActionButtons', 4, 'method'],
					['preferredGroupHeight', 1, 'variable'],
					['displayDetails', 1, 'variable']
				];
				
				//For class02 -> Container
				var class02 = ['Container', 245, 'public', ''];
				var planetsClass02 = [
					['Container', 4, 'method'],
					['getID', 4, 'method'],
					['equals', 20, 'method'],
					['CONTAINER_ID', 1, 'variable'],
					['START', 1, 'variable'],
					['END', 1, 'variable'],
					['TOP', 1, 'variable'],
					['BOTTOM', 1, 'variable'],
					['LEFT', 1, 'variable'],
					['RIGHT', 1, 'variable'],
					['containerName', 1, 'variable']
				];
				
				//For class03 -> UIContact
				var class03 = ['UIContact', 140, 'public', 'abstract'];
				var planetsClass03 = [
					['getDescriptor', 1, 'method'],
					['getDisplayName', 1, 'method'],
					['getDisplayDetails', 1, 'method'],
					['getSourceIndex', 1, 'method'],
					['getToolTip', 1, 'method'],
					['getRightButtonMenu', 1, 'method'],
					['getParentGroup', 1, 'method'],
					['setParentGroup', 1, 'method'],
					['getSearchStrings', 1, 'method'],
					['getDefaultContactDetail', 2, 'method'],
					['getContactDetailsForOpterationSet', 2, 'method'],
					['getContactDetails', 1, 'method'],
					['getContactCustomActionButtons', 1, 'method'],
					['getPreferredHeight', 4, 'method']
				];
				
				
				function init()
				{
				scene = new THREE.Scene();
				camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 0.1, 1000 );
				camera.position.set(0,0,90);
				camera.up = new THREE.Vector3(0,0,1);
				camera.lookAt(new THREE.Vector3(0.3,2,2));
				renderer = new THREE.WebGLRenderer();
				renderer.setSize( window.innerWidth, window.innerHeight );
				document.body.appendChild( renderer.domElement );
				var light = new THREE.PointLight(0xffffff, 2);
				light.position.set(0,0,80);
				scene.add(light)
				}
				
				//Draw a planet for a given sun with a specific size and position
				function drawPlanet(planetxposition, sunyposition, planetsize, planetcolour, orbitspeed, rotationspeed)
				{
					var planetgeometry = new THREE.SphereGeometry(planetsize,10,10);
					var planetmaterial = new THREE.MeshPhongMaterial();
					planetmaterial.color.copy(new THREE.Color(planetcolour));
					var planet = new THREE.Mesh(planetgeometry, planetmaterial);
					planet.geometry.dynamic = true;
					planet.position.x = planetxposition;
					planet.position.y = sunyposition;
					planets.push(planet);
					planetradii.push(planetxposition);
					planetcentres.push(0);
					planetorbitspeeds.push(orbitspeed);
					planetrotationspeeds.push(rotationspeed);
					scene.add(planet);
				}
				
				//Draw many planets for a given sun with a specific size spaced evenly apart
				function drawMultiplePlanets(numberofplanets, sunyposition, planetsize)
				{
					for (var i=0; i<numberofplanets; i++)
					{
						drawPlanet(17+(i*17), sunyposition, planetsize);
					}
				}				
					
				//Draw a sun at a specific location with a specific size and colour
				function drawSun(sunyposition, sunsize, suncolour)
				{
					var sungeometry = new THREE.SphereGeometry(sunsize,30,30);
					var sunmaterial = new THREE.MeshPhongMaterial({color:suncolour, shininess: 12, specular: 0xdedeb2});
					var sun = new THREE.Mesh(sungeometry, sunmaterial);
					sun.geometry.dynamic = true;
					sun.position.y = -sunyposition;
					suns.push(sun);
					scene.add(sun);		
				}
				
				function drawMultipleSunsAndPlanets(numberofclasses, numberofplanets, sunsize, planetsize)
				{
					for (var i=0; i<numberofclasses; i++)
					{
						drawSun(i*150, sunsize);
						drawMultiplePlanets(numberofplanets, -(i*150), planetsize);
					}
				}	
	
				function keyboardListener()
				{
					window.addEventListener('keypress', function (e) {
						if (e.keyCode === 97) 
						{
							camera.position.x -= 0.5;
						}
						else if (e.keyCode === 100)
						{
							camera.position.x += 0.5;
						}
						else if (e.keyCode === 119)
						{
							camera.position.y += 0.5;
						}
						else if (e.keyCode === 120)
						{
							camera.position.y -= 0.5;
						}
						else if (e.keyCode === 115)
						{
							camera.position.z += 0.5;
						}
						else if (e.keyCode === 83)
						{
							camera.position.z -= 0.5;
						}
						else if (e.keyCode === 98)
						{
							camera.rotation.x -= 0.01;
						}
						else if (e.keyCode === 116)
						{
							camera.rotation.x += 0.01;
						}
						else if (e.keyCode === 104)
						{
							camera.rotation.y += 0.01;
						}
						else if (e.keyCode === 102)
						{
							camera.rotation.y -= 0.01;
						}
						else if (e.keyCode === 103)
						{
							camera.rotation.z += 0.01;
						}
						else if (e.keyCode === 71)
						{
							camera.rotation.z -= 0.01;
						}
				}, false);
				}
				
				function rotateAnimation()
				{
					for (var i = 0; i< planets.length; i++)
					{
						planets[i].rotation.y += planetrotationspeeds[i];
					}
				}
				
				function orbitAnimation()
				{
					for (var i = 0; i< planets.length; i++)
					{
						planets[i].position.x = planetradii[i]*Math.sin(planetcentres[i]);
						planets[i].position.z = planetradii[i]*Math.cos(planetcentres[i]);
						planetcentres[i] += planetorbitspeeds[i];
					}
				}
							
				function animate()
				{
					requestAnimationFrame(animate);
					rotateAnimation();
					orbitAnimation();
					render();
				}
						
				function render() 
				{													
					renderer.render(scene, camera);
				}	
				
				init();
				keyboardListener();
				animate();
				
				//Test data
				//drawMultipleSunsAndPlanets(3, 4, 8, 4);
				
				//Draw some suns
				drawSun(0, 8, 0xFFFF00);				
				
				//Draw some planets
				drawPlanet(17, 0, 4, 0x2F4F4F , 0.05, 0.06);
				drawPlanet(34, 0, 4, 0xD2691E, 0.01, 0.09);
				
		</script>
	</body>
</html>