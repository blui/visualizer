<html>
	<head>
		<title>Code Galaxy</title>
		<style>canvas { width: 100%; height: 100% }</style>
	</head>
	<body bgcolor="#000000">
		<script src="https://rawgithub.com/mrdoob/three.js/master/build/three.js"></script>
		<script>

				//Set up scene and camera
				var scene = new THREE.Scene();
				var camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 0.1, 1000 );
				camera.position.set(0,-40,160);
				camera.up = new THREE.Vector3(0,0,1);
				camera.lookAt(new THREE.Vector3(0.3,2,2));
				
				//Set up renderer
				var renderer = new THREE.WebGLRenderer();
				renderer.setSize( window.innerWidth, window.innerHeight );
				document.body.appendChild( renderer.domElement );
				
				//Planet positions
				var planets = new Array();
				var planetradii = new Array();
				var center = 0;
				
				function drawPlanet(planetxposition, sunyposition, planetsize)
				{
					var planetgeometry = new THREE.SphereGeometry(planetsize,6,6);
					var planetmaterial = new THREE.MeshBasicMaterial();
					var planetcolor = new THREE.Color(0x6A5ACD);
					planetmaterial.color.copy(planetcolor);
					var planet = new THREE.Mesh(planetgeometry, planetmaterial);
					planet.geometry.dynamic = true;
					planet.position.x = planetxposition;
					planet.position.y = sunyposition;
					planets.push(planet);
					planetradii.push(planetxposition);
					scene.add(planet);
				}
				
				function drawMultiplePlanets(numberofplanets, sunyposition, planetsize)
				{
					for (var i=0; i<numberofplanets; i++)
					{
						drawPlanet(17+(i*17), sunyposition, planetsize);
					}
				}				
	
				function drawSun(yposition, sunsize)
				{
					var sungeometry = new THREE.SphereGeometry(sunsize,30,30);
					var sunmaterial = new THREE.MeshBasicMaterial();
					var suncolor = new THREE.Color(0x6FFFF00);
					sunmaterial.color.copy(suncolor);
					var sun = new THREE.Mesh(sungeometry, sunmaterial);
					sun.geometry.dynamic = true;
					sun.position.y = -yposition;
					scene.add(sun);		
				}
				
				function drawMultipleSunsAndPlanets(numberofclasses, numberofplanets, sunsize, planetsize)
				{
					for (var i=0; i<numberofclasses; i++)
					{
						drawSun(i*150, sunsize);
						drawMultiplePlanets(numberofplanets, -(i*150), planetsize);
					}
				}	
	
				function keyboardListener()
				{
					window.addEventListener('keypress', function (e) {
						if (e.keyCode === 97) 
						{
							camera.position.x -= 0.5;
						}
						else if (e.keyCode === 100)
						{
							camera.position.x += 0.5;
						}
						else if (e.keyCode === 119)
						{
							camera.position.y += 0.5;
						}
						else if (e.keyCode === 120)
						{
							camera.position.y -= 0.5;
						}
						else if (e.keyCode === 115)
						{
							camera.position.z += 0.5;
						}
						else if (e.keyCode === 83)
						{
							camera.position.z -= 0.5;
						}
						else if (e.keyCode === 98)
						{
							camera.rotation.x -= 0.01;
						}
						else if (e.keyCode === 116)
						{
							camera.rotation.x += 0.01;
						}
						else if (e.keyCode === 104)
						{
							camera.rotation.y += 0.01;
						}
						else if (e.keyCode === 102)
						{
							camera.rotation.y -= 0.01;
						}
						else if (e.keyCode === 103)
						{
							camera.rotation.z += 0.01;
						}
						else if (e.keyCode === 71)
						{
							camera.rotation.z -= 0.01;
						}
				}, false);
				}
				
				function rotateAnimation()
				{
					for (var i = 0; i< planets.length; i++)
					{
						planets[i].rotation.x += 0.01;
						planets[i].rotation.y += 0.01;
					}
				}
				
				function orbitAnimation()
				{
					for (var i = 0; i< planets.length; i++)
					{
						planets[i].position.x = planetradii[i]*Math.sin(center);
						planets[i].position.z = planetradii[i]*Math.cos(center);
					}
					center += 0.03;
				}
							
				function animate()
				{
					requestAnimationFrame(animate);
					
					rotateAnimation();
					orbitAnimation();

					render();
				}
						
				function render() 
				{													
					renderer.render(scene, camera);
				}	
				
				keyboardListener();
				animate();
				
				//Test data
				drawMultipleSunsAndPlanets(3, 4, 8, 4);
				
		</script>
	</body>
</html>